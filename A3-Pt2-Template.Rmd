---
title: "TITLE OF YOUR PROJECT"
author: "GROUP 15"
date: "November 12th, 2024"
output: pdf_document
---

List your group members, including their student numbers, here:

-   Alexa Melnechuk (169086699)
-   Joey Kielt (169087303)
-   Sanjana Mahabir (169080789)
-   Uma Sisira Akella (200300920)
-   Shalin Panjwani (169073107)

You **must** be in a group in MyLS in order to see the DropBox used for submission. Even if you're alone, you must join a group by yourself.

You **must** be in a group with people from the same section as you. MyLS does not allow for groups including students from both Data100A and Data100B.

```{r setup, include=FALSE}
# echo = FALSE will set the Rmd to *not* show the R code. Don't change this.
# You may change the default figure width and figure height as you please.
knitr::opts_chunk$set(echo = FALSE, message = FALSE, fig.width = 6)

# Put any libraries that you need to load here.
# DO NOT PUT "install.packages()" IN AN RMD FILE!!!
library(tidyverse)
library(arrow)
theme_set(theme_bw())
library(openxlsx)
library(ggridges)
library(ggplot2)
library(viridis)
```

# Abstract

This report focuses on how global challenges such as climate change awareness, natural disasters and the covid 19 pandemic impact national well being and analyzing the correlation of these effects to determine if they vary across different regions and levels of awareness. The data used was cleaned and then further manipulated to further emphasis that correlation between the different sets of data. From our data, it can be concluded that there are definitely relationships and correlations between the different sets of data. 
# Introduction

Climate change is something that has been studied. Here's some relevant information about the context of our study.

If needed, this paragraph is more information about the context.

In this report, we are going to explore some aspects climate change and the impact and/or perceptions of it by using exploratory techniques. We'll explore \<<general description of data>\> using \<<general description of techniques>\>.

By the end of this report, we will have shown ...

# Data Description

## \<\<Data Set 1\>\> Does climate change awareness correlate with national happiness levels across continents?

```{r load_data1}
# Put in your code to load in the data set, along with any
# necessary cleaning beyond what was done in Part 1

# Note that the code in this document will not be shown
# when you click "knit", so the placement of this code
# chunk is purely for your benefit: You can see what happened
# with your data, which makes it easier to describe below!



cyclones_data <- read_parquet("./cyclones_data.parquet")

 
# cyclones_plot <- ggplot(data = cyclones_data) +
#   geom_density_ridges(aes(x = max_wind, y = ObservYear, fill = Awareness)) +
#   scale_fill_viridis_c(name = "Climate Awareness") +
#   facet_wrap(~"Hurricane Intensity", ncol = 1) +
#   theme_minimal() +
#   labs(title = "Climate Awareness vs. Hurricane Intensity by Year",
#        x = "Hurricane Intensity",
#        y = "Year")
# 
# ice_extent_plot <- ggplot(data = sea_ice_extent) +
#   geom_density_ridges(aes(x = value, y = year, fill = Awareness)) +
#   scale_fill_viridis_c(name = "Climate Awareness") +
#   facet_wrap(~Region, ncol = 1, scales = "free_x") +
#   theme_minimal() +
#   labs(title = "Climate Awareness vs. Ice Extent by Year",
#        x = "Ice Extent",
#        y = "Year")
# 
# cyclones_plot
# ice_extent_plot
 

# ggplot() +
#   geom_density_ridges(data = cyclones_data, aes(x = Intensity, y = Year, fill = Awareness), size = 0.3) +
#   scale_fill_viridis_c(name = "Climate Awareness") +
#   facet_wrap(~"Hurricane Intensity", ncol = 1) +
# 
#   geom_density_ridges(data = sea_ice_extent_xlsx, aes(x = Ice_Extent, y = Year, fill = Awareness), size = 0.3) +
#   scale_fill_viridis_c(name = "Climate Awareness") +
#   facet_wrap(~Region, ncol = 1, scales = "free_x") +
# 
#   theme_minimal() +
# 
#   labs(title = "Climate Awareness vs. Hurricane Intensity and Ice Extent by Year",
#        x = "Value (Intensity for Hurricanes, Extent for Ice)",
#        y = "Year") +
#   theme(legend.position = "right")

```

The data from above consists of climate awareness, happiness and covid-19 cases for continent grouping. This data was used to determine whether higher climate awareness correlates with higher or lower happiness scores by country in context with continental grouping to identify if there are regional patterns. Through examining whether countries with higher climate change awareness report higher or lower happiness levels, it helps to develop an understanding to whether climate change implications influence mental well being. By using regional comparisons, it can revel if the psychological impact of awareness varies culturally or geographically, showcasing if it affects individuals well being differently across the continents. 

In order to clean the data, we \<\<steps to clean the data, concise but precise enough that a reader could follow your steps without seeing your code\>\>.

## \<\<Data Set 2\>\> Is there a link between sea ice extent changes and hurricane strength?

```{r load_data2}
sea_ice_extent <- read_parquet("./ice_extent_yearly.parquet")
# Reminder: do NOT print your data to the screen unless it's
# completely necessary
```

The data consists of cyclones for hurricane strength and ice extent in terms of Arctic and Antarctic. This data was used to determine if years with intense hurricanes corresponded to years with lower ice extent – looking at the environmental interdependencies. By analyzing extreme whether events like hurricanes and changing ice extents which are indicators of climate change through looking at the direct impacts to the environment and the indirect affect to national well being by increasing economic and social vulnerabilities. By examining if severe hurricanes correlate with reduced sea ice, it hints at broader environmental implications of climate change – an ecosystem under strain. This ecological strain can translate into social challenges like affecting public health, safety and well being overtime, primarily hurting communities where these disasters are likely to happen. 

In order to clean the data, we \<\<steps to clean the data, concise but precise enough that a reader could follow your steps without seeing your code\>\>

## \<\<Data Set 3\>\> Did higher COVID-19 cases in 2020 impact national happiness levels, with variations by climate awareness?

```{r load_data2}
# Put in your code to load in the data set, along with any
# necessary cleaning beyond what was done in Part 1

climate_awareness <- read_parquet("./climate_awareness.parquet") |>
  mutate(
    aware_score = aware_alot + 0.75*aware_moderate + 0.5*aware_alittle + 0.25*aware_no
    )
climate_happening <- read_parquet("./climate_happening.parquet")
#mutate(aware_score = aware_alot + 0.75*aware_moderate + 0.5*aware_alittle + 0.25*aware_no)
```

The data come from \<<place>\> and detail \<<more specific description of the data>\>.

In order to clean the data, we \<\<steps to clean the data, concise but precise enough that a reader could follow your steps without seeing your code\>\>

## \<\<Data Set 4\>\>

```{r load_data2}
# Put in your code to load in the data set, along with any
# necessary cleaning beyond what was done in Part 1

covid_2020 <- read_parquet("./covid_2020.parquet")
```

The data come from \<<place>\> and detail \<<more specific description of the data>\>.

In order to clean the data, we \<\<steps to clean the data, concise but precise enough that a reader could follow your steps without seeing your code\>\>

## \<\<Data Set 5\>\>

```{r load_data2}
# Put in your code to load in the data set, along with any
# necessary cleaning beyond what was done in Part 1

happiness_data <- read_parquet("./happiness.parquet")
```

The data come from \<<place>\> and detail \<<more specific description of the data>\>.

In order to clean the data, we \<\<steps to clean the data, concise but precise enough that a reader could follow your steps without seeing your code\>\>

## Combining the Data

Explain how any combinations of data were performed. Explain what kind of join was needed, whether columns had to be modified (for example, matching "country" names.)

```{r}

# 1. Does climate awareness correlate with national happiness levels across continents?

#Combining data
awareness_happiness <- climate_awareness %>%
  select(country, aware_alot) %>%
  merge(happiness_data %>% select(country, life_ladder), by = "country") %>%
  merge(covid_2020 %>% select(country, continent), by = "country") %>%
  filter(!is.na(continent), !is.na(aware_alot), !is.na(life_ladder))

# Create scatter plot
ggplot(awareness_happiness, aes(x = aware_alot, y = life_ladder, color = continent)) +
  geom_point() +
  geom_smooth(method = "lm", se = FALSE) +
  labs(title = "Climate Awareness vs. Happiness by Continent",
       x = "Climate Awareness Level",
       y = "Happiness Score",
       color = "Continent") +
  theme_minimal()

# 2. Is there a link between sea ice extent changes and hurricane strength?

# Combining data
# Prepare data for hurricane strength
yearly_cyclone_strength <- cyclones_data %>%
  group_by(ObservYear) %>%
  summarize(avg_max_wind = mean(max_wind, na.rm = TRUE))

# Prepare data for sea ice extent
yearly_ice_extent <- sea_ice_extent %>%
  filter(region %in% c("Arctic", "Antarctic")) %>%
  group_by(year, region) %>%
  summarize(avg_extent = mean(value, na.rm = TRUE))

# Ridgeline plot for Hurricane Strength over time
ggplot(yearly_cyclone_strength, aes(x = avg_max_wind, y = as.factor(ObservYear), fill = ObservYear)) +
  geom_density_ridges() +
  labs(title = "Hurricane Strength Over Time",
       x = "Average Maximum Wind Speed",
       y = "Year",
       fill = "Year") +
  theme_minimal() +
  scale_fill_viridis_c()

# Ridgeline plot for Sea Ice Extent over time (Arctic and Antarctic)
ggplot(yearly_ice_extent, aes(x = avg_extent, y = as.factor(year), fill = region)) +
  geom_density_ridges() +
  labs(title = "Sea Ice Extent Over Time (Arctic and Antarctic)",
       x = "Average Ice Extent",
       y = "Year",
       fill = "Region") +
  theme_minimal() +
  scale_fill_manual(values = c("Arctic" = "blue", "Antarctic" = "lightblue"))

# 3. Did higher COVID-19 cases in 2020 impact national happiness levels, with variations by climate awareness?

# Combining data
covid_happiness_awareness <- merge(
  merge(
    covid_2020 %>% select(country, continent, total_cases),
    happiness_data %>% select(country, life_ladder),
    by = "country"
  ),
  climate_awareness %>% select(country, aware_alot),
  by = "country"
) %>%
  mutate(
    covid_impact = ifelse(total_cases > median(total_cases, na.rm = TRUE), "High", "Low"),
    climate_awareness = ifelse(aware_alot > median(aware_alot, na.rm = TRUE), "High", "Low")
  )

# Create grouped bar plot
ggplot(covid_happiness_awareness, aes(x = covid_impact, y = life_ladder, fill = climate_awareness)) +
  geom_bar(stat = "summary", fun = "mean", position = "dodge") +
  facet_wrap(~continent) +
  labs(title = "COVID-19 Impact on Happiness by Climate Awareness and Continent",
       x = "COVID-19 Impact",
       y = "Average Happiness Score",
       fill = "Climate Awareness") +
  theme_minimal()


```

# Exploratory Data Analysis

To achieve our goals, we explored the data by...

We explored many aspects of the data, but will demonstrate three. These are \<\<insight 1\>\>, \<\<insight 2\>\>, and \<<insight3>\>

The first aspect that we found interesting is shown in \@ref(fig:insight1). The insight should be specific to the data shown, not a general statement beyond the data (leave that for the conclusion).

```{r insight1, fig.cap="This is a figure caption that you will need to change in order to get good marks in the visualization rubric items."}
# This is an example of how you can control figures and captions in
# an R chunk. Note that you can reference figures using:
# \@ref(fig:insight1), where "insight1" is the label of this code
# chunk (the first bit of text after the "r" in "```{r label, options...}")
```

This insight is supported by the summary statistics in table \@ref(tab:summary_stats)

```{r summary_stats}
# Calculate the relevant summary statistics here.
# Note that the "kable" function in the "knitr" package
# is convenient for making nice tables. Other packages can
# do much fancier things with tables, but keep in mind that
# the insights should be the star, not the formatting.
```

The next insight that we found is shown in \@ref(fig:insight2).

```{r insight2, fig.height=4, fig.width=6, fig.cap="This is a figure caption that you will need to change in order to get good marks in the visualization rubric items."}
# This figure will have a height of 4 and a width of 6.
# Feel free to change this, and to apply different sizes
# to the other figures you create.
```

Finally, \@ref(fig:insight3) shows ...

```{r insight3, fig.height=4, fig.width=6, fig.cap="This is a figure caption that you will need to change in order to get good marks in the visualization rubric items."}
```

# Conclusion and Future Work

Overall, we found \<<general ideas>\>.

A second paragraph about our findings.

The next steps in this analysis are...

The limitations of this analysis are as follows. (Do not simply list potential issues with sampling, but relate them to your analysis and how they affect your conclusions. An honest and complete acknowledgement of the limitations makes the analysis more trustworthy.)

# References

I am not strict about MLA or APA style or anything like that. For this report, I would much rather have your citations be easy to match to your insights.

The easiest way is to use Rmd's [footnote](https://bookdown.org/yihui/rmarkdown/markdown-syntax.html#inline-formatting) syntax. This will put a number beside the word where the footnote appears, and the full text of the footnote at the bottom of the page (pdf) or end of the document (html). The syntax is:[^1], where I suggest that you put in something like this[^2] to make references for this assignment.

[^1]: See the source view to see this footnote

[^2]: The relevance to the insight is ... . From \<<name of source and name of article>\>, published on \<<date>\>, url: \<<link to page>\>

Alternatively, you could make a list of citations with their main arguments and why they're relevent to your insights, methods, etc.

The link above also references "bibtex" files. These are also extremely convenient, but have a steep learning curve and they make it difficult to tie them to an insight. If you use bibtext, then make sure that you provide a sentence to describe the source and it's relevance when you cite it - don't just add citations to the end of a sentence (this is common practice in academia, but I want to know that your citations are directly relevant for this assignmnet).
