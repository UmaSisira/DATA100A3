---
title: "Climate, Crises, and Contenment: A Global Well-Being Analysis"
author: "Group 15"
date: "November 12th, 2024"
output: pdf_document
---

List your group members, including their student numbers, here:

-   Alexa Melnechuk (169086699)
-   Joey Kielt (169087303)
-   Sanjana Mahabir (169080789)
-   Uma Sisira Akella (200300920)
-   Shalin Panjwani (169073107)

You **must** be in a group in MyLS in order to see the DropBox used for submission. Even if you're alone, you must join a group by yourself.

You **must** be in a group with people from the same section as you. MyLS does not allow for groups including students from both Data100A and Data100B.

```{r setup, include=FALSE}
# echo = FALSE will set the Rmd to *not* show the R code. Don't change this.
# You may change the default figure width and figure height as you please.
knitr::opts_chunk$set(echo = FALSE, message = FALSE, fig.width = 6)

# Put any libraries that you need to load here.
# DO NOT PUT "install.packages()" IN AN RMD FILE!!!
library(tidyverse)
library(arrow)
library(openxlsx)
library(ggridges)
library(ggplot2)
library(viridis)
library(dplyr)
library(lubridate)
theme_set(theme_bw())
```

# Abstract

This report focuses on how global challenges such as climate change awareness, natural disasters and the COVID-19 pandemic’s impact on national well-being. We explore how these factors correlate and potentially influence each other by analyzing data on happiness scores, climate awareness, COVID-19 cases, sea ice extent, and cyclone strength. The research aims to uncover patterns in how environmental consciousness, extreme weather events, and global health crises affect psychological resilience and overall happiness in various cultural and geographical contexts. The data used was cleaned and then further manipulated to emphasize the correlation between the different data sets. We started off by finding out if climate awareness correlated with happiness across countries. Then we explored whether there was a link between cyclone strength and sea ice extent. Finally, we explored whether higher COVID-19 cases in 2020 impact national happiness levels, with variations by climate awareness. Through this analysis, we came to the conclusion that global challenges such as climate change, natural disasters, and pandemics do indeed affect national well-being, albeit with different effects across regions.

# Introduction

Introduction: 

In this report, we will mainly be exploring the relationship between climate change, how aware people are of it, and well-being. Our key research questions are:

1.  How does climate change awareness correlate with happiness in different parts of the world?

2.  Is there a connection between Arctic sea ice loss, hurricane intensification, and climate awareness?

3.  Did countries with higher COVID-19 case rates in 2020 report lower happiness levels? Does this relationship vary based on climate awareness?

The data we analyze includes happiness scores, climate awareness percentages, COVID-19 case counts, Arctic sea ice extent and cyclone intensity. We will be using exploratory data analysis techniques including scatterplots, ridgeline plots, and grouped boxplots. Using these we can identify patterns and relationships between various variables. 

By the end of this report, we will have gained various insights into how climate awareness, hurricane intensity, and the other factors we explored could relate to happiness and well-being across regions. An understanding of this data can help in guiding future efforts to provide better support to communities facing or impacted by crises.

# Data Description

## \<\<Data Set 1\>\>

```{r load_data1}
cyclones_data <- read_parquet("./cyclones_data.parquet")
cyclones_summary <- cyclones_data |>
  mutate(year = year(date)) |>
  group_by(year, Basin) |>
  summarize(avg_max_wind = mean(max_wind, na.rm = TRUE))

```

The data come from \<<place>\> and describe \<<more specific description of the data>\>.

In order to clean the data, we \<\<steps to clean the data, concise but precise enough that a reader could follow your steps without seeing your code\>\>.

## \<\<Data Set 2\>\>

```{r load_data2}
sea_ice_extent <- read_parquet("./ice_extent_yearly.parquet")
ice_summary <- sea_ice_extent |>
  filter(region %in% c("Arctic", "Antarctic")) |>
  group_by(year, region) |>
  summarize(avg_extent = mean(value, na.rm = TRUE))

```

The data come from \<<place>\> and detail \<<more specific description of the data>\>.

In order to clean the data, we \<\<steps to clean the data, concise but precise enough that a reader could follow your steps without seeing your code\>\>

## \<\<Data Set 3\>\>

```{r load_data3}
climate_awareness <- read_parquet("./climate_awareness.parquet") |>
  mutate(
    aware_score = aware_alot + 0.75*aware_moderate + 0.5*aware_alittle + 0.25*aware_no
    )
climate_happening <- read_parquet("./climate_happening.parquet")

```

The data come from \<<place>\> and detail \<<more specific description of the data>\>.

In order to clean the data, we \<\<steps to clean the data, concise but precise enough that a reader could follow your steps without seeing your code\>\>

## \<\<Data Set 4\>\>

```{r load_data4}
covid_2020 <- read_parquet("./covid_2020.parquet")
```

The data come from \<<place>\> and detail \<<more specific description of the data>\>.

In order to clean the data, we \<\<steps to clean the data, concise but precise enough that a reader could follow your steps without seeing your code\>\>

## \<\<Data Set 5\>\>

```{r load_data5}
happiness_data <- read_parquet("./happiness.parquet")
```

The data come from \<<place>\> and detail \<<more specific description of the data>\>.

In order to clean the data, we \<\<steps to clean the data, concise but precise enough that a reader could follow your steps without seeing your code\>\>

## Combining the Data

Explain how any combinations of data were performed. Explain what kind of join was needed, whether columns had to be modified (for example, matching "country" names.)

```{r}

# 1. Does climate awareness correlate with national happiness levels across continents?

#Combining data
awareness_happiness <- climate_awareness |>
  select(country, aware_alot) |>
  merge(happiness_data |> select(country, life_ladder), by = "country") |>
  merge(covid_2020 |> select(country, continent), by = "country") |>
  filter(!is.na(continent), !is.na(aware_alot), !is.na(life_ladder))

# Create scatter plot
ggplot(awareness_happiness, aes(x = aware_alot, y = life_ladder, color = continent)) +
  geom_point() +
  geom_smooth(method = "lm", se = FALSE) +
  labs(title = "Climate Awareness vs. Happiness by Continent",
       x = "Climate Awareness Level",
       y = "Happiness Score",
       color = "Continent") +
  theme_minimal()

# 2. Is there a link between sea ice extent changes and hurricane strength?

# Combining data
combined_data <- merge(cyclones_summary, ice_summary, by = "year")

# Create the ridgeline plot with facets
ggplot(combined_data, aes(x = avg_max_wind, y = region, fill = after_stat(x))) +
  geom_density_ridges_gradient(scale = 3, rel_min_height = 0.01) +
  facet_wrap(~ Basin, scales = "free", ncol = 2) +
  scale_fill_viridis_c(name = "Avg Max Wind Speed (kt)", option = "C") +
  labs(title = "Sea Ice Extent vs Hurricane Strength (1979-2023)",
       subtitle = "Ridgeline plot of average maximum wind speed by basin and ice region",
       x = "Average Maximum Wind Speed (kt)",
       y = "Sea Ice Region") +
  theme_ridges() +
  theme(legend.position = "bottom",
        plot.title = element_text(hjust = 0.5),
        plot.subtitle = element_text(hjust = 0.5))


# 3. Did higher COVID-19 cases in 2020 impact national happiness levels, with variations by climate awareness?

# Combining data
covid_happiness_awareness <- merge(
  merge(
    covid_2020 |> select(country, continent, total_cases),
    happiness_data |> select(country, life_ladder),
    by = "country"
  ),
  climate_awareness |> select(country, aware_alot),
  by = "country"
) |>
  mutate(
    covid_impact = ifelse(total_cases > median(total_cases, na.rm = TRUE), "High", "Low"),
    climate_awareness = ifelse(aware_alot > median(aware_alot, na.rm = TRUE), "High", "Low")
  )

# Create grouped bar plot
ggplot(covid_happiness_awareness, aes(x = covid_impact, y = life_ladder, fill = climate_awareness)) +
  geom_bar(stat = "summary", fun = "mean", position = "dodge") +
  facet_wrap(~continent) +
  labs(title = "COVID-19 Impact on Happiness by Climate Awareness and Continent",
       x = "COVID-19 Impact",
       y = "Average Happiness Score",
       fill = "Climate Awareness") +
  theme_minimal()


```

# Exploratory Data Analysis

To achieve our goals, we explored the data by...

We explored many aspects of the data, but will demonstrate three. These are \<\<insight 1\>\>, \<\<insight 2\>\>, and \<<insight3>\>

The first aspect that we found interesting is shown in \@ref(fig:insight1). The insight should be specific to the data shown, not a general statement beyond the data (leave that for the conclusion).

```{r insight1, fig.cap="This is a figure caption that you will need to change in order to get good marks in the visualization rubric items."}
# This is an example of how you can control figures and captions in
# an R chunk. Note that you can reference figures using:
# \@ref(fig:insight1), where "insight1" is the label of this code
# chunk (the first bit of text after the "r" in "```{r label, options...}")
```

This insight is supported by the summary statistics in table \@ref(tab:summary_stats)

```{r summary_stats}
# Calculate the relevant summary statistics here.
# Note that the "kable" function in the "knitr" package
# is convenient for making nice tables. Other packages can
# do much fancier things with tables, but keep in mind that
# the insights should be the star, not the formatting.
```

The next insight that we found is shown in \@ref(fig:insight2).

```{r insight2, fig.height=4, fig.width=6, fig.cap="This is a figure caption that you will need to change in order to get good marks in the visualization rubric items."}
# This figure will have a height of 4 and a width of 6.
# Feel free to change this, and to apply different sizes
# to the other figures you create.
```

Finally, \@ref(fig:insight3) shows ...

```{r insight3, fig.height=4, fig.width=6, fig.cap="This is a figure caption that you will need to change in order to get good marks in the visualization rubric items."}
```

# Conclusion and Future Work

Overall, we found \<<general ideas>\>.

A second paragraph about our findings.

The next steps in this analysis are...

The limitations of this analysis are as follows. (Do not simply list potential issues with sampling, but relate them to your analysis and how they affect your conclusions. An honest and complete acknowledgement of the limitations makes the analysis more trustworthy.)

# References

I am not strict about MLA or APA style or anything like that. For this report, I would much rather have your citations be easy to match to your insights.

The easiest way is to use Rmd's [footnote](https://bookdown.org/yihui/rmarkdown/markdown-syntax.html#inline-formatting) syntax. This will put a number beside the word where the footnote appears, and the full text of the footnote at the bottom of the page (pdf) or end of the document (html). The syntax is:[^1], where I suggest that you put in something like this[^2] to make references for this assignment.

[^1]: See the source view to see this footnote

[^2]: The relevance to the insight is ... . From \<<name of source and name of article>\>, published on \<<date>\>, url: \<<link to page>\>

Alternatively, you could make a list of citations with their main arguments and why they're relevent to your insights, methods, etc.

The link above also references "bibtex" files. These are also extremely convenient, but have a steep learning curve and they make it difficult to tie them to an insight. If you use bibtext, then make sure that you provide a sentence to describe the source and it's relevance when you cite it - don't just add citations to the end of a sentence (this is common practice in academia, but I want to know that your citations are directly relevant for this assignmnet).
