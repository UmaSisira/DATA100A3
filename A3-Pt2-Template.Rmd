---
title: "Climate, Crises, and Contenment: A Global Well-Being Analysis"
author: "Group 15"
date: "November 12th, 2024"
output: pdf_document
---

List your group members, including their student numbers, here:

-   Alexa Melnechuk (169086699)
-   Joey Kielt (169087303)
-   Sanjana Mahabir (169080789)
-   Uma Sisira Akella (200300920)
-   Shalin Panjwani (169073107)

You **must** be in a group in MyLS in order to see the DropBox used for submission. Even if you're alone, you must join a group by yourself.

You **must** be in a group with people from the same section as you. MyLS does not allow for groups including students from both Data100A and Data100B.

```{r setup, include=FALSE}
# echo = FALSE will set the Rmd to *not* show the R code. Don't change this.
# You may change the default figure width and figure height as you please.
knitr::opts_chunk$set(echo = FALSE, message = FALSE, fig.width = 6)

# Put any libraries that you need to load here.
# DO NOT PUT "install.packages()" IN AN RMD FILE!!!
library(tidyverse)
library(arrow)
library(openxlsx)
library(ggridges)
library(ggplot2)
library(viridis)
library(dplyr)
library(lubridate)
library(knitr)
theme_set(theme_bw())
```

# Abstract

This report focuses on how global challenges such as climate change awareness, natural disasters and the COVID-19 pandemic’s impact on national well-being. We explore how these factors correlate and potentially influence each other by analyzing data on happiness scores, climate awareness, COVID-19 cases, sea ice extent, and cyclone strength. The research aims to uncover patterns in how environmental consciousness, extreme weather events, and global health crises affect psychological resilience and overall happiness in various cultural and geographical contexts. The data used was cleaned and then further manipulated to emphasize the correlation between the different data sets. We started off by finding out if climate awareness correlated with happiness across countries. Then we explored whether there was a link between cyclone strength and sea ice extent. Finally, we explored whether higher COVID-19 cases in 2020 impact national happiness levels, with variations by climate awareness. Through this analysis, we came to the conclusion that global challenges such as climate change, natural disasters, and pandemics do indeed affect national well-being, albeit with different effects across regions.

# Introduction

Introduction: 

In this report, we will mainly be exploring the relationship between climate change, how aware people are of it, and well-being. Our key research questions are:

1.  How does climate change awareness correlate with happiness in different parts of the world?

2.  Is there a connection between Arctic sea ice loss, hurricane intensification, and climate awareness?

3.  Did countries with higher COVID-19 case rates in 2020 report lower happiness levels? Does this relationship vary based on climate awareness?

The data we analyze includes happiness scores, climate awareness percentages, COVID-19 case counts, Arctic sea ice extent and cyclone intensity. We will be using exploratory data analysis techniques including scatterplots, ridgeline plots, and grouped boxplots. Using these we can identify patterns and relationships between various variables. 

By the end of this report, we will have gained various insights into how climate awareness, hurricane intensity, and the other factors we explored could relate to happiness and well-being across regions. An understanding of this data can help in guiding future efforts to provide better support to communities facing or impacted by crises.

# Data Description

## \<\<Data Set 1\>\>

```{r load_data1}
cyclones_data <- read_parquet("./cyclones_data.parquet")
cyclones_summary <- cyclones_data |>
  mutate(year = year(date)) |>
  group_by(year, Basin) |>
  summarize(avg_max_wind = mean(max_wind, na.rm = TRUE))

```

The data come from NOAA data files for cyclones in the Atlantic and North Pacific basins. First we began by loading the NOAA data files. Where then the columns are set up to display the wind speed, pressure, and location coordinates. When dealing with the missing values in the data set "-999" and "-99" were used as placeholders. The code then replaces these values with NA allowing for easier filtering. When structuring the cyclone data set columns like BasinNumberYear, Name, and Entries are created to easily identify the rows. The columns hold data for each cyclone, such as name and year. The fill function is used to carry values down in these columns, ensuring each cyclone entry has complete data. Once both the Atlantic and North Pacific data sets are created, they are combined into a single data frame for us to easily analyze. When cleaning the coordinate data latitude and longitude are initially in text format. Using the function, convert_latlon,we were able to convert it into numeric values. Where the north and east values are positive and south and west values are negative. After completing the cleaning process, the dataset is saved as a parquet file named "cyclones_data.parquet". This format is efficient for storage and can be easily used for further analysis.

## \<\<Data Set 2\>\>

```{r load_data2}
sea_ice_extent <- read_parquet("./ice_extent_yearly.parquet")
ice_summary <- sea_ice_extent |>
  filter(region %in% c("Arctic", "Antarctic")) |>
  group_by(year, region) |>
  summarize(avg_extent = mean(value, na.rm = TRUE))

```

The data come from Excel file containing Northern Hemisphere (NH) and Southern Hemisphere (SH) ice extent data from 1978 to 2023. We loaded the sea ice data from the Excel file. The code reads the NH sheet, selecting specific columns and renaming them to tidy the data. The data is then tidied further using pivot_longer() to create a single year column, allowing each row to contain month, day, year, and ice_extent. The same cleaning process is also used for the SH sheet. The NH and SH datasets are then combined into one, with a new date column created from year, month, and day, all sorted by region and date. The code generates a line plot of daily sea ice extent by region to visualize annual trends, then calculates yearly minimum and maximum ice extents for each region. These min and max values are organized in a table and saved as "ice_extent_yearly.parquet". 

## \<\<Data Set 3\>\>

```{r load_data3}
climate_awareness <- read_parquet("./climate_awareness.parquet") |>
  mutate(
    aware_score = aware_alot + 0.75*aware_moderate + 0.5*aware_alittle + 0.25*aware_no
    )

```

The data comes from and Excel file with how aware people are of climate change based on country. We began by loading the climate awareness data from the Excel file. To clean the data, we first pivoted the data to show the country and score. Then we mutated it so that we had a column for each type of score. Then we pivoted it again to show the country and scores better. These vales were stored in 'climate_awareness.parquet'. In part 2, we multiplied the type of score with a numerical value to make our own system for identifying how aware people were.

## \<\<Data Set 4\>\>

```{r load_data4}
covid_2020 <- read_parquet("./covid_2020.parquet")
```

The data comes from Our World In Data to analyze total cases by country for 2020. We began by loading the COVID data, selecting specific columns: date, iso_code, location, and continent, and then filtering it to only have 2020 cases. To compare COVID cases with climate awareness, the code aligns country names in both datasets. First, it replaces periods in country names (e.g., “U.S.A.” becomes “USA”) and then corrects specific mismatches (e.g., “Bolivia (Plurinational State of)” is shortened to “Bolivia” and “Hong Kong” becomes “Hong Kong SAR, China”). Once names are standardized, the code joins the COVID data with World Bank population data and calculates each country’s COVID cases per capita by dividing total cases by population.

## \<\<Data Set 5\>\>

```{r load_data5}
happiness_data <- read_parquet("./happiness.parquet")
```

The data comes from an Excel file from the World Happiness Report. It contains a "life_ladder" column which shows how happy people are. We began by loading the happiness data from the Excel file. To clean the data, we used jaitor() to clean the names. Then, we renamed "country_names" to "country". Then, we filtered out any "NA" values in "life_ladder". Then, arranged in descending order and grouped by country. We then filtered the data so that we only have the most recent observation of the relevant values. This data was stored in "happiness.parquet".

## Combining the Data

#### *1. Climate awareness correlation with national happiness levels across continets*

For this analysis, three datasets were combined using merge operations:

1.  climate_awareness

2.  happiness_data

3.  covid_2020

The combination was performed using two successive merge operations.

1.  First, climate_awareness and happiness_data were merged using the "country" column as the key.

2.  Then, the resulting dataset was merged with covid_2020, again using the "country" column as the key.

After merging, rows with missing values in continent, aware_alot, or life_ladder were filtered out using the filter function.

#### **2. Link between sea ice extent changes and hurricane strength**

For this analysis, two datasets were combined:

1.  cyclones_summary

2.  ice_summary

These datasets were merged using the "year" column as the key. The default merge behavior (natural join) was used.

#### **3. COVID-19 impact on national happiness levels, with variations by climate awareness**

This analysis combined three datasets:

1.  covid_2020

2.  happiness_data

3.  climate_awareness

The combination was performed using two successive merge operations, both using the default merge behavior:

1.  First, covid_2020 and happiness_data were merged using the "country" column as the key.

2.  Then, the resulting dataset was merged with climate_awareness, again using the "country" column as the key.

In all cases, the merges were performed using the default merge in R, meaning they were "naturally joined". This means that all rows from both datasets are included in the result, with NA values filled in where there is no match.

```{r}

# 1. Does climate awareness correlate with national happiness levels across continents?

#Combining data
awareness_happiness <- climate_awareness |>
  select(country, aware_alot) |>
  merge(happiness_data |> select(country, life_ladder), by = "country") |>
  merge(covid_2020 |> select(country, continent), by = "country") |>
  filter(!is.na(continent), !is.na(aware_alot), !is.na(life_ladder))

# Create scatter plot
ggplot(awareness_happiness, aes(x = aware_alot, y = life_ladder, color = continent)) +
  geom_point() +
  geom_smooth(method = "lm", se = FALSE) +
  labs(title = "Climate Awareness vs. Happiness by Continent",
       x = "Climate Awareness Level",
       y = "Happiness Score",
       color = "Continent") +
  theme_minimal()

# 2. Is there a link between sea ice extent changes and hurricane strength?

# Combining data
combined_data <- merge(cyclones_summary, ice_summary, by = "year")

# Create the ridgeline plot with facets
ggplot(combined_data, aes(x = avg_max_wind, y = region, fill = after_stat(x))) +
  geom_density_ridges_gradient(scale = 3, rel_min_height = 0.01) +
  facet_wrap(~ Basin, scales = "free", ncol = 2) +
  scale_fill_viridis_c(name = "Avg Max Wind Speed (kt)", option = "C") +
  labs(title = "Sea Ice Extent vs Hurricane Strength (1979-2023)",
       subtitle = "Ridgeline plot of average maximum wind speed by basin and ice region",
       x = "Average Maximum Wind Speed (kt)",
       y = "Sea Ice Region") +
  theme_ridges() +
  theme(legend.position = "bottom",
        plot.title = element_text(hjust = 0.5),
        plot.subtitle = element_text(hjust = 0.5))


# 3. Did higher COVID-19 cases in 2020 impact national happiness levels, with variations by climate awareness?

# Combining data
covid_happiness_awareness <- merge(
  merge(
    covid_2020 |> select(country, continent, total_cases),
    happiness_data |> select(country, life_ladder),
    by = "country"
  ),
  climate_awareness |> select(country, aware_alot),
  by = "country"
) |>
  mutate(
    covid_impact = ifelse(total_cases > median(total_cases, na.rm = TRUE), "High", "Low"),
    climate_awareness = ifelse(aware_alot > median(aware_alot, na.rm = TRUE), "High", "Low")
  )

# Create grouped bar plot
ggplot(covid_happiness_awareness, aes(x = covid_impact, y = life_ladder, fill = climate_awareness)) +
  geom_bar(stat = "summary", fun = "mean", position = "dodge") +
  facet_wrap(~continent) +
  labs(title = "COVID-19 Impact on Happiness by Climate Awareness and Continent",
       x = "COVID-19 Impact",
       y = "Average Happiness Score",
       fill = "Climate Awareness") +
  theme_minimal()


```

# Exploratory Data Analysis

Process Description and Justification

We conducted a systematic analysis to understand how global challenges - climate change, natural disasters, and the COVID-19 pandemic - affect national well-being across different regions. Our exploration process involved three key steps:

1. Analyzing correlations between climate awareness and happiness scores across continents
2. Examining the relationship between sea ice extent and hurricane intensity
3. Investigating how COVID-19 impacts interacted with climate awareness to affect happiness levels

This structured approach allowed us to address our research questions while accounting for geographical and temporal variations in the data.

Key Insights and Visualization
The first aspect that we found interesting is shown in Figure \@ref(fig:insight1).

```{r insight1}
# 1. Climate awareness correlation with happiness levels
awareness_happiness <- climate_awareness |>
  select(country, aware_alot) |>
  merge(happiness_data |> select(country, life_ladder), by = "country") |>
  merge(covid_2020 |> select(country, continent), by = "country") |>
  filter(!is.na(continent), !is.na(aware_alot), !is.na(life_ladder))

# Create scatter plot
ggplot(awareness_happiness, aes(x = aware_alot, y = life_ladder, color = continent)) +
  geom_point() +
  geom_smooth(method = "lm", se = FALSE) +
  labs(title = "Climate Awareness vs. Happiness by Continent",
       x = "Climate Awareness Level",
       y = "Happiness Score",
       color = "Continent") +
  theme_minimal()
```

This scatter plot reveals distinct continental patterns in how climate awareness relates to happiness levels. European and North American countries show positive correlations between awareness and happiness (scores ranging 6.0-7.5), while African nations demonstrate an inverse relationship. This suggests that the impact of climate awareness on well-being varies significantly by region, possibly due to differing socioeconomic conditions.

These patterns are supported by our comprehensive summary statistics:

```{r summary_stats}
# Calculate summary statistics from the combined datasets
summary_stats <- covid_happiness_awareness |>
  group_by(continent) %>%
  summarise(
    avg_happiness = mean(life_ladder, na.rm = TRUE),
    avg_climate_aware = mean(aware_alot, na.rm = TRUE) * 100,
    covid_cases_100k = mean(total_cases/100000, na.rm = TRUE),
    n_countries = n()
  ) |>
  arrange(desc(avg_happiness))

# Create formatted table
kable(summary_stats,
      caption = "Summary Statistics by Continent",
      digits = 2,
      col.names = c("Continent", "Avg Happiness", "Climate Awareness %", 
                    "COVID Cases per 100k", "Number of Countries"))
```

The next insight that we found is shown in Figure \@ref(fig:insight2).

```{r insight2}
# 2. Sea ice extent and hurricane strength relationship
combined_data <- merge(cyclones_summary, ice_summary, by = "year")

# Create the ridgeline plot with facets
ggplot(combined_data, aes(x = avg_max_wind, y = region, fill = after_stat(x))) +
  geom_density_ridges_gradient(scale = 3, rel_min_height = 0.01) +
  facet_wrap(~ Basin, scales = "free", ncol = 2) +
  scale_fill_viridis_c(name = "Avg Max Wind Speed (kt)", option = "C") +
  labs(title = "Sea Ice Extent vs Hurricane Strength (1979-2023)",
       subtitle = "Ridgeline plot of average maximum wind speed by basin and ice region",
       x = "Average Maximum Wind Speed (kt)",
       y = "Sea Ice Region") +
  theme_ridges() +
  theme(legend.position = "bottom",
        plot.title = element_text(hjust = 0.5),
        plot.subtitle = element_text(hjust = 0.5))
```

This ridgeline plot demonstrates the distribution of hurricane strength across different ocean basins (AL: Atlantic, CP: Central Pacific, EP: Eastern Pacific) and their relationship with Arctic and Antarctic sea ice regions. Key observations include:
- Central Pacific (CP) shows the widest range of wind speeds (0-75 kt)
- Atlantic basin (AL) displays more concentrated distributions (30-60 kt)
- Both Arctic and Antarctic ice regions show similar patterns within basins
- Higher wind speeds tend to occur in regions with lower ice extent

Finally, Figure \@ref(fig:insight3) presents our findings on COVID-19's impact on happiness levels, considering climate awareness.

```{r insight3}
# 3. COVID-19 impact analysis with climate awareness variation
covid_happiness_awareness <- merge(
  merge(
    covid_2020 |> select(country, continent, total_cases),
    happiness_data |> select(country, life_ladder),
    by = "country"
  ),
  climate_awareness |> select(country, aware_alot),
  by = "country"
) |>
  mutate(
    covid_impact = ifelse(total_cases > median(total_cases, na.rm = TRUE), "High", "Low"),
    climate_awareness = ifelse(aware_alot > median(aware_alot, na.rm = TRUE), "High", "Low")
  )

# Create grouped bar plot
ggplot(covid_happiness_awareness, aes(x = covid_impact, y = life_ladder, fill = climate_awareness)) +
  geom_bar(stat = "summary", fun = "mean", position = "dodge") +
  facet_wrap(~continent) +
  labs(title = "COVID-19 Impact on Happiness by Climate Awareness and Continent",
       x = "COVID-19 Impact",
       y = "Average Happiness Score",
       fill = "Climate Awareness") +
  theme_minimal()
```

This faceted bar plot reveals several important patterns:
- European countries maintained stable happiness levels despite COVID-19, especially those with high climate awareness
- North American regions showed greater variation, with more pronounced drops in happiness during high COVID-19 impact periods
- Asian countries demonstrated the largest gap between high and low climate awareness groups
- African nations showed the lowest overall happiness scores but smallest awareness-based differences

Our exploration reveals several interconnected patterns:
1. The relationship between climate awareness and happiness is regionally dependent, suggesting cultural and economic factors play important roles
2. Hurricane intensity patterns show possible connections to sea ice conditions, though the relationship varies by basin
3. Climate awareness appears to contribute to societal resilience during crises like COVID-19, but this effect varies significantly by region

These findings support our investigation into how global challenges affect national well-being while revealing complex interactions between environmental, social, and health factors across different geographical and cultural contexts.


# Conclusion and Future Work

Overall, we found \<<general ideas>\>.

A second paragraph about our findings.

The next steps in this analysis are...

The limitations of this analysis are as follows. (Do not simply list potential issues with sampling, but relate them to your analysis and how they affect your conclusions. An honest and complete acknowledgement of the limitations makes the analysis more trustworthy.)

# References

I am not strict about MLA or APA style or anything like that. For this report, I would much rather have your citations be easy to match to your insights.

The easiest way is to use Rmd's [footnote](https://bookdown.org/yihui/rmarkdown/markdown-syntax.html#inline-formatting) syntax. This will put a number beside the word where the footnote appears, and the full text of the footnote at the bottom of the page (pdf) or end of the document (html). The syntax is:[^1], where I suggest that you put in something like this[^2] to make references for this assignment.

[^1]: See the source view to see this footnote

[^2]: The relevance to the insight is ... . From \<<name of source and name of article>\>, published on \<<date>\>, url: \<<link to page>\>

Alternatively, you could make a list of citations with their main arguments and why they're relevent to your insights, methods, etc.

The link above also references "bibtex" files. These are also extremely convenient, but have a steep learning curve and they make it difficult to tie them to an insight. If you use bibtext, then make sure that you provide a sentence to describe the source and it's relevance when you cite it - don't just add citations to the end of a sentence (this is common practice in academia, but I want to know that your citations are directly relevant for this assignmnet).
